annotations:
  - border_color: '#808080FF'
    border_radius: 0
    border_style: ''
    color: '#05CA46FF'
    thickness: 1
    type: rectangle
    x1: -1320.0
    y1: -520.0
    x2: 520.0
    y2: 320.0
    z_index: 0
  - border_color: '#808080FF'
    border_radius: 0
    border_style: ''
    color: '#3D4CFFEA'
    thickness: 1
    type: rectangle
    x1: -320.0
    y1: -520.0
    x2: 560.0
    y2: 320.0
    z_index: 1
  - border_color: '#00000000'
    border_style: ''
    color: '#808080FF'
    rotation: 0
    text_bold: false
    text_content: ''
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: -1160.0
    y1: -600.0
    z_index: 2
  - border_color: '#00000000'
    border_style: ''
    color: '#000000FF'
    rotation: 0
    text_bold: false
    text_content: |-
      Site: NY
      BGP: 65010
      Fabric IP: 10.1.1.0/24
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: -1280.0
    y1: -480.0
    z_index: 3
  - border_color: '#00000000'
    border_style: ''
    color: '#000000FF'
    rotation: 0
    text_bold: false
    text_content: |-
      Site: NJ
      BGP: 65020
      Fabric IP: 20.1.1.0/24
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: 0.0
    y1: -480.0
    z_index: 4
  - border_color: '#808080FF'
    border_style: ''
    color: '#FFFFFFFF'
    line_end: null
    line_start: null
    thickness: 1
    type: line
    x1: -480.0
    y1: -680.0
    x2: -480.0
    y2: -680.0
    z_index: 5
  - border_color: '#808080FF'
    border_radius: 0
    border_style: ''
    color: '#D1D818FF'
    thickness: 1
    type: rectangle
    x1: -760.0
    y1: -480.0
    x2: 400.0
    y2: 200.0
    z_index: 6
  - border_color: '#00000000'
    border_style: ''
    color: '#000000FF'
    rotation: 0
    text_bold: false
    text_content: |-
      Core:
      OSPF Area 0
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: -720.0
    y1: -320.0
    z_index: 7
  - border_color: '#00000000'
    border_style: ''
    color: '#808080FF'
    rotation: 0
    text_bold: false
    text_content: BGP AS 65011
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: -1200.0
    y1: -320.0
    z_index: 8
  - border_color: '#00000000'
    border_style: ''
    color: '#808080FF'
    rotation: 0
    text_bold: false
    text_content: BGP AS 65012
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: -40.0
    y1: -320.0
    z_index: 9
  - border_color: '#808080FF'
    border_radius: 0
    border_style: ''
    color: '#E92020FF'
    thickness: 1
    type: rectangle
    x1: -840.0
    y1: -160.0
    x2: 680.0
    y2: 320.0
    z_index: 10
  - border_color: '#00000000'
    border_style: ''
    color: '#808080FF'
    rotation: 0
    text_bold: false
    text_content: ''
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: -760.0
    y1: 0.0
    z_index: 11
  - border_color: '#00000000'
    border_style: ''
    color: '#000000'
    rotation: 0
    text_bold: false
    text_content: |-
      Site: Campus
      BGP: 65030
      Fabric IP: 30.1.1.0/24
    text_font: monospace
    text_italic: false
    text_size: 12
    text_unit: pt
    thickness: 1
    type: text
    x1: -400.0
    y1: 40.0
    z_index: 12
nodes:
  - boot_disk_size: null
    configuration:
      - name: nxos_config.txt
        content: |2-

          !Command: show running-config
          !Running configuration last done at: Thu Oct  3 18:09:04 2024
          !Time: Thu Oct  3 18:09:05 2024

          version 10.4(2) Bios:version
          hostname NY-BGW-1
          vdc NY-BGW-1 id 1
            limit-resource vlan minimum 16 maximum 4094
            limit-resource vrf minimum 2 maximum 4097
            limit-resource port-channel minimum 0 maximum 511
            limit-resource m4route-mem minimum 58 maximum 58
            limit-resource m6route-mem minimum 8 maximum 8

          no password strength-check
          username admin password 5 $5$HILLAK$Bw4VwRwEsysHP5zTvV0txDt2OKt/AJLYJI8pn8zmhS7  role network-admin
          username cisco password 5 $5$JPNCMJ$HbEX3gmU2PVWa4hMRFuGuRMpvNQ4WXkPVMef1yx4/k7  role network-admin
          username cisco passphrase  lifetime 99999 warntime 14 gracetime 3
          ip domain-lookup
          copp profile strict
          snmp-server user admin network-admin auth md5 041E0A8EE2B1BD0BC48E8B6537B00A66380C priv aes-128 33080AC2F292E600D49B882E77B35B4F5D38 localizedV2key
          snmp-server user cisco network-admin auth md5 00709CF6D3D6C766DFCB584DED0866F00218 priv aes-128 0146C2B0C42A60D27D3ED39663DDB232D7D4 localizedV2key
          rmon event 1 log trap public description FATAL(1) owner PMON@FATAL
          rmon event 2 log trap public description CRITICAL(2) owner PMON@CRITICAL
          rmon event 3 log trap public description ERROR(3) owner PMON@ERROR
          rmon event 4 log trap public description WARNING(4) owner PMON@WARNING
          rmon event 5 log trap public description INFORMATION(5) owner PMON@INFO

          vlan 1

          vrf context management
            ip route 0.0.0.0/0 10.3.7.1
            ip route 0.0.0.0/0 198.18.128.1

          interface Ethernet1/1

          interface Ethernet1/2

          interface Ethernet1/3

          interface Ethernet1/4

          interface Ethernet1/5

          interface Ethernet1/6

          interface Ethernet1/7

          interface Ethernet1/8

          interface Ethernet1/9

          interface Ethernet1/10

          interface Ethernet1/11

          interface Ethernet1/12

          interface Ethernet1/13

          interface Ethernet1/14

          interface Ethernet1/15

          interface Ethernet1/16

          interface Ethernet1/17

          interface Ethernet1/18

          interface Ethernet1/19

          interface Ethernet1/20

          interface Ethernet1/21

          interface Ethernet1/22

          interface Ethernet1/23

          interface Ethernet1/24

          interface Ethernet1/25

          interface Ethernet1/26

          interface Ethernet1/27

          interface Ethernet1/28

          interface Ethernet1/29

          interface Ethernet1/30

          interface Ethernet1/31

          interface Ethernet1/32

          interface Ethernet1/33

          interface Ethernet1/34

          interface Ethernet1/35

          interface Ethernet1/36

          interface Ethernet1/37

          interface Ethernet1/38

          interface Ethernet1/39

          interface Ethernet1/40

          interface Ethernet1/41

          interface Ethernet1/42

          interface Ethernet1/43

          interface Ethernet1/44

          interface Ethernet1/45

          interface Ethernet1/46

          interface Ethernet1/47

          interface Ethernet1/48

          interface Ethernet1/49

          interface Ethernet1/50

          interface Ethernet1/51

          interface Ethernet1/52

          interface Ethernet1/53

          interface Ethernet1/54

          interface Ethernet1/55

          interface Ethernet1/56

          interface Ethernet1/57

          interface Ethernet1/58

          interface Ethernet1/59

          interface Ethernet1/60

          interface Ethernet1/61

          interface Ethernet1/62

          interface Ethernet1/63

          interface Ethernet1/64

          interface mgmt0
            no cdp enable
            vrf member management
            ip address 198.18.132.111/21
          icam monitor scale

          line console
            exec-timeout 0
          line vty
            exec-timeout 0
          boot nxos bootflash:/nxos64-cs.10.4.2.F.bin
          event manager applet BOOTCONFIG
            event syslog pattern "Configured from vty"
            action 1.0 cli python bootflash:set_boot.py

          no logging console
    cpu_limit: 100
    cpus: 4
    data_volume: null
    hide_links: false
    id: n0
    image_definition: null
    label: NY-BGW-1
    node_definition: nxosv9000
    parameters: {}
    ram: 10240
    tags: []
    x: -920
    y: -440
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: mgmt0
        slot: 0
        type: physical
      - id: i2
        label: Ethernet1/1
        slot: 1
        type: physical
      - id: i3
        label: Ethernet1/2
        slot: 2
        type: physical
      - id: i4
        label: Ethernet1/3
        slot: 3
        type: physical
      - id: i5
        label: Ethernet1/4
        slot: 4
        type: physical
      - id: i6
        label: Ethernet1/5
        slot: 5
        type: physical
      - id: i7
        label: Ethernet1/6
        slot: 6
        type: physical
      - id: i8
        label: Ethernet1/7
        slot: 7
        type: physical
      - id: i9
        label: Ethernet1/8
        slot: 8
        type: physical
      - id: i10
        label: Ethernet1/9
        slot: 9
        type: physical
      - id: i11
        label: Ethernet1/10
        slot: 10
        type: physical
      - id: i12
        label: Ethernet1/11
        slot: 11
        type: physical
      - id: i13
        label: Ethernet1/12
        slot: 12
        type: physical
      - id: i14
        label: Ethernet1/13
        slot: 13
        type: physical
      - id: i15
        label: Ethernet1/14
        slot: 14
        type: physical
      - id: i16
        label: Ethernet1/15
        slot: 15
        type: physical
      - id: i17
        label: Ethernet1/16
        slot: 16
        type: physical
      - id: i18
        label: Ethernet1/17
        slot: 17
        type: physical
      - id: i19
        label: Ethernet1/18
        slot: 18
        type: physical
      - id: i20
        label: Ethernet1/19
        slot: 19
        type: physical
  - boot_disk_size: null
    configuration:
      - name: nxos_config.txt
        content: |-
          hostname inserthostname-here
          # workaround for booting to loader> prompt
          echo 'from cli import cli' > set_boot.py
          echo 'import json' >> set_boot.py
          echo 'import os' >> set_boot.py
          echo 'import time' >> set_boot.py
          echo 'bootimage = json.loads(cli("show version | json"))["kick_file_name"]' >> set_boot.py
          echo 'set_boot = cli("conf t ; boot nxos {} ; no event manager applet BOOTCONFIG".format(bootimage))' >> set_boot.py
          echo 'i = 0' >> set_boot.py
          echo 'while i < 10:' >> set_boot.py
          echo '    try:' >> set_boot.py
          echo '        save_config = cli("copy running-config startup-config")' >> set_boot.py
          echo '        break' >> set_boot.py
          echo '    except Exception:' >> set_boot.py
          echo '        i += 1' >> set_boot.py
          echo '        time.sleep(1)' >> set_boot.py
          echo 'os.remove("/bootflash/set_boot.py")' >> set_boot.py
          event manager applet BOOTCONFIG
           event syslog pattern "Configured from vty"
           action 1.0 cli python bootflash:set_boot.py
          # minimum needed config to login
          no password strength-check
          username admin role network-admin
          username admin password cisco role network-admin
          username cisco role network-admin
          username cisco password cisco role network-admin
          hostname NY-BGW-2
          vrf context management
            ip route 0.0.0.0/0 10.3.7.1
          interface mgmt 0
            no cdp enable
            ip address 10.3.7.112/24
    cpu_limit: 100
    cpus: 4
    data_volume: null
    hide_links: false
    id: n1
    image_definition: null
    label: NY-BGW-2
    node_definition: nxosv9000
    parameters: {}
    ram: 10240
    tags: []
    x: -920
    y: -280
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: mgmt0
        slot: 0
        type: physical
      - id: i2
        label: Ethernet1/1
        slot: 1
        type: physical
      - id: i3
        label: Ethernet1/2
        slot: 2
        type: physical
      - id: i4
        label: Ethernet1/3
        slot: 3
        type: physical
      - id: i5
        label: Ethernet1/4
        slot: 4
        type: physical
      - id: i6
        label: Ethernet1/5
        slot: 5
        type: physical
      - id: i7
        label: Ethernet1/6
        slot: 6
        type: physical
      - id: i8
        label: Ethernet1/7
        slot: 7
        type: physical
      - id: i9
        label: Ethernet1/8
        slot: 8
        type: physical
      - id: i10
        label: Ethernet1/9
        slot: 9
        type: physical
      - id: i11
        label: Ethernet1/10
        slot: 10
        type: physical
      - id: i12
        label: Ethernet1/11
        slot: 11
        type: physical
      - id: i13
        label: Ethernet1/12
        slot: 12
        type: physical
      - id: i14
        label: Ethernet1/13
        slot: 13
        type: physical
      - id: i15
        label: Ethernet1/14
        slot: 14
        type: physical
      - id: i16
        label: Ethernet1/15
        slot: 15
        type: physical
      - id: i17
        label: Ethernet1/16
        slot: 16
        type: physical
      - id: i18
        label: Ethernet1/17
        slot: 17
        type: physical
      - id: i19
        label: Ethernet1/18
        slot: 18
        type: physical
      - id: i20
        label: Ethernet1/19
        slot: 19
        type: physical
  - boot_disk_size: null
    configuration:
      - name: nxos_config.txt
        content: |2-

          !Command: show running-config
          !Running configuration last done at: Wed Sep 11 10:45:32 2024
          !Time: Wed Sep 11 10:45:33 2024

          version 10.4(3) Bios:version
          hostname NJ-BGW-1
          vdc NJ-BGW-1 id 1
            limit-resource vlan minimum 16 maximum 4094
            limit-resource vrf minimum 2 maximum 4096
            limit-resource port-channel minimum 0 maximum 511
            limit-resource m4route-mem minimum 58 maximum 58
            limit-resource m6route-mem minimum 8 maximum 8

          feature nxapi
          cfs eth distribute
          feature ngmvpn
          nv overlay evpn
          feature ospf
          feature bgp
          feature pim
          feature interface-vlan
          feature vn-segment-vlan-based
          feature lacp
          feature dhcp
          feature vpc
          feature lldp
          feature nv overlay
          evpn multisite border-gateway 65020
            delay-restore time 300
          feature ngoam

          no password strength-check
          username admin password 5 $5$LFBJLD$wDyaB7SdvManBABGY52QAF08yjFBDsbMK65C7ih3RW1  role network-admin
          username cisco password 5 $5$CFELNI$ioF7uQBHxCEZVt3mLMBgVB515ltyfvyHgR5zkAL8WW.  role network-admin
          username cisco passphrase  lifetime 99999 warntime 14 gracetime 3
          ip domain-lookup
          copp profile strict
          snmp-server user admin network-admin auth md5 483BDC5A7562E12EE4297F74CD8196AE1866 localizedV2key
          snmp-server user cisco network-admin auth md5 007190932C88A73533F13A44452E79381A26 priv aes-128 365AF3A11EB9D22C63922F7E5D7B2B620163 localizedV2key
          snmp-server host 10.3.0.30 traps version 2c public udp-port 2162
          rmon event 1 log trap public description FATAL(1) owner PMON@FATAL
          rmon event 2 log trap public description CRITICAL(2) owner PMON@CRITICAL
          rmon event 3 log trap public description ERROR(3) owner PMON@ERROR
          rmon event 4 log trap public description WARNING(4) owner PMON@WARNING
          rmon event 5 log trap public description INFORMATION(5) owner PMON@INFO

          fabric forwarding anycast-gateway-mac 2020.0000.00aa
          ipv6 switch-packets lla
          ip pim evpn-border-leaf
          ip pim rp-address 20.1.1.33 group-list 239.1.1.0/25
          ip pim ssm range 232.0.0.0/8
          ip igmp snooping vxlan
          ip multicast multipath s-g-hash next-hop-based
          vlan 1,20,2000,3600
          vlan 2000
            name dmz-1
            vn-segment 50000

          ip prefix-list default-route seq 5 permit 0.0.0.0/0 le 1
          ip prefix-list host-route seq 5 permit 0.0.0.0/0 eq 32
          ipv6 prefix-list default-route-v6 seq 5 permit 0::/0
          ipv6 prefix-list host-route-v6 seq 5 permit 0::/0 eq 128
          route-map extcon-rmap-filter deny 10
            match ip address prefix-list default-route
          route-map extcon-rmap-filter deny 20
            match ip address prefix-list host-route
          route-map extcon-rmap-filter permit 1000
          route-map extcon-rmap-filter-allow-host deny 10
            match ip address prefix-list default-route
          route-map extcon-rmap-filter-allow-host permit 1000
          route-map extcon-rmap-filter-v6 deny 10
            match ipv6 address prefix-list default-route-v6
          route-map extcon-rmap-filter-v6 deny 20
            match ipv6 address prefix-list host-route-v6
          route-map extcon-rmap-filter-v6 permit 1000
          route-map extcon-rmap-filter-v6-allow-host deny 10
            match ipv6 address prefix-list default-route-v6
          route-map extcon-rmap-filter-v6-allow-host permit 1000
          route-map fabric-rmap-redist-subnet permit 10
            match tag 12345
          route-map rmap-redist-direct permit 10
            match tag 54321
          service dhcp
          ip dhcp relay
          ip dhcp relay information option
          ip dhcp relay information option vpn
          ipv6 dhcp relay
          vrf context dmz-1
            description dmz-1
            vni 50000
            ip pim rp-address 100.100.100.100 group-list 224.0.0.0/4
            ip pim ssm range 232.0.0.0/8
            ip multicast multipath s-g-hash next-hop-based
            rd auto
            address-family ipv4 unicast
              route-target both auto
              route-target both auto mvpn
              route-target both auto evpn
            address-family ipv6 unicast
              route-target both auto
              route-target both auto evpn
          vrf context management
            ip route 0.0.0.0/0 10.3.7.1
          vpc domain 1
            peer-switch
            peer-keepalive destination 10.3.7.122 source 10.3.7.121
            delay restore 150
            peer-gateway
            auto-recovery reload-delay 360
            ipv6 nd synchronize
            ip arp synchronize
          ngoam install acl

          nxapi http port 80


          interface Vlan1
            no ip redirects
            no ipv6 redirects

          interface Vlan20
            no shutdown
            mtu 9216
            vrf member dmz-1
            ip address 172.18.112.1/30

          interface Vlan2000
            description dmz-1
            no shutdown
            mtu 9216
            vrf member dmz-1
            no ip redirects
            ip forward
            ipv6 address use-link-local-only
            no ipv6 redirects
            ip pim sparse-mode

          interface Vlan3600
            description VPC-Peer-Link SVI
            no shutdown
            mtu 9216
            no ip redirects
            ip address 20.1.1.50/30
            no ipv6 redirects
            ip ospf network point-to-point
            ip router ospf UNDERLAY area 0.0.0.0
            ip pim sparse-mode

          interface port-channel500
            description "vpc-peer-link NJ-BGW-1--NJ-BGW-2"
            switchport mode trunk
            spanning-tree port type network
            vpc peer-link

          interface nve1
            no shutdown
            host-reachability protocol bgp
            advertise virtual-rmac
            source-interface loopback1
            multisite border-gateway interface loopback100
            member vni 50000 associate-vrf
              multisite ingress-replication optimized
              mcast-group 239.1.1.1

          interface Ethernet1/1
            description "PO 500 (vpc-peer-link) member NJ-BGW-1-Ethernet1/1 to NJ-BGW-2-Ethernet1/1"
            switchport mode trunk
            channel-group 500 mode active

          interface Ethernet1/2
            no switchport
            mtu 9216
            ip address 192.168.20.0/31 tag 54321
            no shutdown
            evpn multisite dci-tracking

          interface Ethernet1/3
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/3.2
            mtu 9216
            encapsulation dot1q 2
            vrf member dmz-1
            ip address 172.18.20.0/31
            ip pim sparse-mode
            no shutdown

          interface Ethernet1/4
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/5
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/6
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/7
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/8
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/9
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/10
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/11
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/12
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/13
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/14
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/15
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/16
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/17
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/18
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/19
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/20
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/21
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/22
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/23
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/24
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/25
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/26
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/27
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/28
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/29
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/30
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/31
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/32
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/33
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/34
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/35
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/36
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/37
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/38
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/39
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/40
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/41
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/42
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/43
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/44
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/45
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/46
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/47
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/48
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/49
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/50
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/51
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/52
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/53
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/54
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/55
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/56
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/57
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/58
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/59
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/60
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/61
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/62
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/63
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/64
            no switchport
            mtu 9216
            no shutdown

          interface mgmt0
            no cdp enable
            vrf member management
            ip address 10.3.7.121/24

          interface loopback0
            description Routing loopback interface
            ip address 20.1.1.1/32 tag 54321
            ip router ospf UNDERLAY area 0.0.0.0
            ip pim sparse-mode

          interface loopback1
            description VTEP loopback interface
            ip address 20.1.1.17/32 tag 54321
            ip address 20.1.1.19/32 secondary tag 54321
            ip router ospf UNDERLAY area 0.0.0.0
            ip pim sparse-mode

          interface loopback100
            ip address 10.10.0.2/32 tag 54321
            ip router ospf UNDERLAY area 0.0.0.0
            ip pim sparse-mode
          icam monitor scale

          line console
            exec-timeout 0
          line vty
            exec-timeout 0
          router ospf UNDERLAY
            router-id 20.1.1.1
          router bgp 65020
            router-id 20.1.1.1
            address-family ipv4 unicast
              redistribute direct route-map rmap-redist-direct
            address-family ipv6 unicast
            address-family l2vpn evpn
              advertise-pip
            neighbor 10.1.1.1
              remote-as 65010
              update-source loopback0
              ebgp-multihop 5
              peer-type fabric-external
              address-family ipv4 mvpn
                send-community
                send-community extended
                rewrite-rt-asn
              address-family l2vpn evpn
                send-community
                send-community extended
                rewrite-evpn-rt-asn
            neighbor 10.1.1.2
              remote-as 65010
              update-source loopback0
              ebgp-multihop 5
              peer-type fabric-external
              address-family ipv4 mvpn
                send-community
                send-community extended
                rewrite-rt-asn
              address-family l2vpn evpn
                send-community
                send-community extended
                rewrite-evpn-rt-asn
            neighbor 20.1.1.49
              remote-as 65020
              update-source Vlan3600
              address-family ipv4 unicast
                next-hop-self
            neighbor 30.1.1.1
              remote-as 65030
              update-source loopback0
              ebgp-multihop 5
              peer-type fabric-external
              address-family ipv4 mvpn
                send-community
                send-community extended
                rewrite-rt-asn
              address-family l2vpn evpn
                send-community
                send-community extended
                rewrite-evpn-rt-asn
            neighbor 30.1.1.2
              remote-as 65030
              update-source loopback0
              ebgp-multihop 5
              peer-type fabric-external
              address-family ipv4 mvpn
                send-community
                send-community extended
                rewrite-rt-asn
              address-family l2vpn evpn
                send-community
                send-community extended
                rewrite-evpn-rt-asn
            neighbor 192.168.20.1
              remote-as 65000
              update-source Ethernet1/2
              address-family ipv4 unicast
                next-hop-self
            vrf dmz-1
              address-family ipv4 unicast
                network 0.0.0.0/0
                advertise l2vpn evpn
                redistribute direct route-map fabric-rmap-redist-subnet
                maximum-paths ibgp 2
              address-family ipv6 unicast
                advertise l2vpn evpn
                redistribute direct route-map fabric-rmap-redist-subnet
                maximum-paths ibgp 2
              neighbor 172.18.20.1
                remote-as 65012
                address-family ipv4 unicast
                  send-community
                  send-community extended
                  route-map extcon-rmap-filter-allow-host out
              neighbor 172.18.112.2
                remote-as 65020
                address-family ipv4 unicast
                  send-community
                  send-community extended
          evpn
          event manager applet BOOTCONFIG
            event syslog pattern "Configured from vty"
            action 1.0 cli python bootflash:set_boot.py

          no logging console
    cpu_limit: 100
    cpus: 4
    data_volume: null
    hide_links: false
    id: n2
    image_definition: null
    label: NJ-BGW-1
    node_definition: nxosv9000
    parameters: {}
    ram: 10240
    tags: []
    x: -200
    y: -440
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: mgmt0
        slot: 0
        type: physical
      - id: i2
        label: Ethernet1/1
        slot: 1
        type: physical
      - id: i3
        label: Ethernet1/2
        slot: 2
        type: physical
      - id: i4
        label: Ethernet1/3
        slot: 3
        type: physical
      - id: i5
        label: Ethernet1/4
        slot: 4
        type: physical
      - id: i6
        label: Ethernet1/5
        slot: 5
        type: physical
      - id: i7
        label: Ethernet1/6
        slot: 6
        type: physical
      - id: i8
        label: Ethernet1/7
        slot: 7
        type: physical
      - id: i9
        label: Ethernet1/8
        slot: 8
        type: physical
      - id: i10
        label: Ethernet1/9
        slot: 9
        type: physical
      - id: i11
        label: Ethernet1/10
        slot: 10
        type: physical
      - id: i12
        label: Ethernet1/11
        slot: 11
        type: physical
      - id: i13
        label: Ethernet1/12
        slot: 12
        type: physical
      - id: i14
        label: Ethernet1/13
        slot: 13
        type: physical
      - id: i15
        label: Ethernet1/14
        slot: 14
        type: physical
      - id: i16
        label: Ethernet1/15
        slot: 15
        type: physical
      - id: i17
        label: Ethernet1/16
        slot: 16
        type: physical
      - id: i18
        label: Ethernet1/17
        slot: 17
        type: physical
      - id: i19
        label: Ethernet1/18
        slot: 18
        type: physical
      - id: i20
        label: Ethernet1/19
        slot: 19
        type: physical
  - boot_disk_size: null
    configuration:
      - name: nxos_config.txt
        content: |-
          hostname inserthostname-here
          # workaround for booting to loader> prompt
          echo 'from cli import cli' > set_boot.py
          echo 'import json' >> set_boot.py
          echo 'import os' >> set_boot.py
          echo 'import time' >> set_boot.py
          echo 'bootimage = json.loads(cli("show version | json"))["kick_file_name"]' >> set_boot.py
          echo 'set_boot = cli("conf t ; boot nxos {} ; no event manager applet BOOTCONFIG".format(bootimage))' >> set_boot.py
          echo 'i = 0' >> set_boot.py
          echo 'while i < 10:' >> set_boot.py
          echo '    try:' >> set_boot.py
          echo '        save_config = cli("copy running-config startup-config")' >> set_boot.py
          echo '        break' >> set_boot.py
          echo '    except Exception:' >> set_boot.py
          echo '        i += 1' >> set_boot.py
          echo '        time.sleep(1)' >> set_boot.py
          echo 'os.remove("/bootflash/set_boot.py")' >> set_boot.py
          event manager applet BOOTCONFIG
           event syslog pattern "Configured from vty"
           action 1.0 cli python bootflash:set_boot.py
          # minimum needed config to login
          no password strength-check
          username admin role network-admin
          username admin password cisco role network-admin
          username cisco role network-admin
          username cisco password cisco role network-admin
          hostname NJ-BGW-2
          vrf context management
            ip route 0.0.0.0/0 10.3.7.1
          interface mgmt 0
            no cdp enable
            ip address 10.3.7.122/24
    cpu_limit: 100
    cpus: 4
    data_volume: null
    hide_links: false
    id: n3
    image_definition: null
    label: NJ-BGW-2
    node_definition: nxosv9000
    parameters: {}
    ram: 10240
    tags: []
    x: -200
    y: -280
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: mgmt0
        slot: 0
        type: physical
      - id: i2
        label: Ethernet1/1
        slot: 1
        type: physical
      - id: i3
        label: Ethernet1/2
        slot: 2
        type: physical
      - id: i4
        label: Ethernet1/3
        slot: 3
        type: physical
      - id: i5
        label: Ethernet1/4
        slot: 4
        type: physical
      - id: i6
        label: Ethernet1/5
        slot: 5
        type: physical
      - id: i7
        label: Ethernet1/6
        slot: 6
        type: physical
      - id: i8
        label: Ethernet1/7
        slot: 7
        type: physical
      - id: i9
        label: Ethernet1/8
        slot: 8
        type: physical
      - id: i10
        label: Ethernet1/9
        slot: 9
        type: physical
      - id: i11
        label: Ethernet1/10
        slot: 10
        type: physical
      - id: i12
        label: Ethernet1/11
        slot: 11
        type: physical
      - id: i13
        label: Ethernet1/12
        slot: 12
        type: physical
      - id: i14
        label: Ethernet1/13
        slot: 13
        type: physical
      - id: i15
        label: Ethernet1/14
        slot: 14
        type: physical
      - id: i16
        label: Ethernet1/15
        slot: 15
        type: physical
      - id: i17
        label: Ethernet1/16
        slot: 16
        type: physical
      - id: i18
        label: Ethernet1/17
        slot: 17
        type: physical
      - id: i19
        label: Ethernet1/18
        slot: 18
        type: physical
      - id: i20
        label: Ethernet1/19
        slot: 19
        type: physical
  - boot_disk_size: null
    configuration:
      - name: default
        content: System Bridge
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n4
    image_definition: null
    label: ext-conn-0
    node_definition: external_connector
    parameters: {}
    ram: null
    tags: []
    x: -560
    y: -720
    interfaces:
      - id: i0
        label: port
        slot: 0
        type: physical
  - boot_disk_size: null
    configuration: []
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: true
    id: n5
    image_definition: null
    label: unmanaged-switch-0
    node_definition: unmanaged_switch
    parameters: {}
    ram: null
    tags: []
    x: -560
    y: -640
    interfaces:
      - id: i0
        label: port0
        slot: 0
        type: physical
      - id: i1
        label: port1
        slot: 1
        type: physical
      - id: i2
        label: port2
        slot: 2
        type: physical
      - id: i3
        label: port3
        slot: 3
        type: physical
      - id: i4
        label: port4
        slot: 4
        type: physical
      - id: i5
        label: port5
        slot: 5
        type: physical
      - id: i6
        label: port6
        slot: 6
        type: physical
      - id: i7
        label: port7
        slot: 7
        type: physical
      - id: i8
        label: port8
        slot: 8
        type: physical
      - id: i9
        label: port9
        slot: 9
        type: physical
      - id: i10
        label: port10
        slot: 10
        type: physical
      - id: i11
        label: port11
        slot: 11
        type: physical
      - id: i12
        label: port12
        slot: 12
        type: physical
      - id: i13
        label: port13
        slot: 13
        type: physical
      - id: i14
        label: port14
        slot: 14
        type: physical
      - id: i15
        label: port15
        slot: 15
        type: physical
  - boot_disk_size: null
    configuration:
      - name: nxos_config.txt
        content: |2-

          !Command: show running-config
          !Running configuration last done at: Thu Jul 25 13:14:12 2024
          !Time: Thu Jul 25 13:14:12 2024

          version 10.4(3) Bios:version
          hostname NY-DMZ-1
          vdc NY-DMZ-1 id 1
            limit-resource vlan minimum 16 maximum 4094
            limit-resource vrf minimum 2 maximum 4096
            limit-resource port-channel minimum 0 maximum 511
            limit-resource m4route-mem minimum 58 maximum 58
            limit-resource m6route-mem minimum 8 maximum 8

          feature bgp
          feature interface-vlan

          no password strength-check
          username admin password 5 $5$GAOKDH$gMv3.hmDerM5ohP4.PgiS0GkEXSPEiuM7Ds0kpBi0l.  role network-admin
          username cisco password 5 $5$NGCLDB$dcAnM5/WN.xqFETMO34yqNhqCD6PFPs1V4QGUu2diY4  role network-admin
          username cisco passphrase  lifetime 99999 warntime 14 gracetime 3
          ip domain-lookup
          copp profile strict
          snmp-server user admin network-admin auth md5 0071E71BAA69D874DFDDB1868FFABF8A56CA priv aes-128 320CE806A9966DE65E2C39011C772805840B localizedV2key
          snmp-server user cisco network-admin auth md5 2165A055FC2BE17ED7B0A7C8DAB0E4CE1597 priv aes-128 3772C427EE74821AB68A88D18CAAE6971192 localizedV2key
          rmon event 1 log trap public description FATAL(1) owner PMON@FATAL
          rmon event 2 log trap public description CRITICAL(2) owner PMON@CRITICAL
          rmon event 3 log trap public description ERROR(3) owner PMON@ERROR
          rmon event 4 log trap public description WARNING(4) owner PMON@WARNING
          rmon event 5 log trap public description INFORMATION(5) owner PMON@INFO

          ip route 0.0.0.0/0 Null0
          vlan 1,11

          route-map direct permit 10
          vrf context management
            ip route 0.0.0.0/0 10.3.7.1


          interface Vlan1

          interface Vlan11
            no shutdown
            ip address 192.168.1.1/24

          interface Ethernet1/1
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/1.2
            mtu 9216
            encapsulation dot1q 2
            ip address 172.18.10.1/31
            no shutdown

          interface Ethernet1/2
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/2.2
            mtu 9216
            encapsulation dot1q 2
            ip address 172.18.10.3/31
            no shutdown

          interface Ethernet1/3
            switchport access vlan 11

          interface Ethernet1/4

          interface Ethernet1/5

          interface Ethernet1/6

          interface Ethernet1/7

          interface Ethernet1/8

          interface Ethernet1/9

          interface Ethernet1/10

          interface Ethernet1/11

          interface Ethernet1/12

          interface Ethernet1/13

          interface Ethernet1/14

          interface Ethernet1/15

          interface Ethernet1/16

          interface Ethernet1/17

          interface Ethernet1/18

          interface Ethernet1/19

          interface Ethernet1/20

          interface Ethernet1/21

          interface Ethernet1/22

          interface Ethernet1/23

          interface Ethernet1/24

          interface Ethernet1/25

          interface Ethernet1/26

          interface Ethernet1/27

          interface Ethernet1/28

          interface Ethernet1/29

          interface Ethernet1/30

          interface Ethernet1/31

          interface Ethernet1/32

          interface Ethernet1/33

          interface Ethernet1/34

          interface Ethernet1/35

          interface Ethernet1/36

          interface Ethernet1/37

          interface Ethernet1/38

          interface Ethernet1/39

          interface Ethernet1/40

          interface Ethernet1/41

          interface Ethernet1/42

          interface Ethernet1/43

          interface Ethernet1/44

          interface Ethernet1/45

          interface Ethernet1/46

          interface Ethernet1/47

          interface Ethernet1/48

          interface Ethernet1/49

          interface Ethernet1/50

          interface Ethernet1/51

          interface Ethernet1/52

          interface Ethernet1/53

          interface Ethernet1/54

          interface Ethernet1/55

          interface Ethernet1/56

          interface Ethernet1/57

          interface Ethernet1/58

          interface Ethernet1/59

          interface Ethernet1/60

          interface Ethernet1/61

          interface Ethernet1/62

          interface Ethernet1/63

          interface Ethernet1/64

          interface mgmt0
            no cdp enable
            vrf member management
            ip address 10.3.7.113/24
          icam monitor scale

          line console
            exec-timeout 0
          line vty
            exec-timeout 0
          router bgp 65011
            address-family ipv4 unicast
              network 192.168.1.0/24
              default-information originate
            neighbor 172.18.10.0
              remote-as 65010
              update-source Ethernet1/1.2
              address-family ipv4 unicast
                default-originate
            neighbor 172.18.10.2
              remote-as 65010
              update-source Ethernet1/2.2
              address-family ipv4 unicast
                default-originate
          event manager applet BOOTCONFIG
            event syslog pattern "Configured from vty"
            action 1.0 cli python bootflash:set_boot.py

          no logging console
    cpu_limit: 100
    cpus: 2
    data_volume: null
    hide_links: false
    id: n6
    image_definition: null
    label: NY-DMZ-1
    node_definition: nxosv9000
    parameters: {}
    ram: 8192
    tags: []
    x: -1120
    y: -360
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: mgmt0
        slot: 0
        type: physical
      - id: i2
        label: Ethernet1/1
        slot: 1
        type: physical
      - id: i3
        label: Ethernet1/2
        slot: 2
        type: physical
      - id: i4
        label: Ethernet1/3
        slot: 3
        type: physical
      - id: i5
        label: Ethernet1/4
        slot: 4
        type: physical
      - id: i6
        label: Ethernet1/5
        slot: 5
        type: physical
      - id: i7
        label: Ethernet1/6
        slot: 6
        type: physical
      - id: i8
        label: Ethernet1/7
        slot: 7
        type: physical
      - id: i9
        label: Ethernet1/8
        slot: 8
        type: physical
      - id: i10
        label: Ethernet1/9
        slot: 9
        type: physical
      - id: i11
        label: Ethernet1/10
        slot: 10
        type: physical
      - id: i12
        label: Ethernet1/11
        slot: 11
        type: physical
      - id: i13
        label: Ethernet1/12
        slot: 12
        type: physical
      - id: i14
        label: Ethernet1/13
        slot: 13
        type: physical
      - id: i15
        label: Ethernet1/14
        slot: 14
        type: physical
      - id: i16
        label: Ethernet1/15
        slot: 15
        type: physical
      - id: i17
        label: Ethernet1/16
        slot: 16
        type: physical
      - id: i18
        label: Ethernet1/17
        slot: 17
        type: physical
      - id: i19
        label: Ethernet1/18
        slot: 18
        type: physical
      - id: i20
        label: Ethernet1/19
        slot: 19
        type: physical
  - boot_disk_size: null
    configuration:
      - name: nxos_config.txt
        content: |2-

          !Command: show running-config
          !Running configuration last done at: Thu Jul 25 12:28:38 2024
          !Time: Thu Jul 25 12:28:39 2024

          version 10.4(3) Bios:version
          hostname NJ-DMZ-1
          vdc NJ-DMZ-1 id 1
            limit-resource vlan minimum 16 maximum 4094
            limit-resource vrf minimum 2 maximum 4096
            limit-resource port-channel minimum 0 maximum 511
            limit-resource m4route-mem minimum 58 maximum 58
            limit-resource m6route-mem minimum 8 maximum 8

          feature bgp

          no password strength-check
          username admin password 5 $5$KLKJCN$hkmvtEPw2/QYL02/bbdadHg41WdxWdeX38Ncj86d9SD  role network-admin
          username cisco password 5 $5$KDHKLH$SsEAAXZhhJ46NX08ao9L4Vz8yeqhGWkepKKqF1Hn4j4  role network-admin
          username cisco passphrase  lifetime 99999 warntime 14 gracetime 3
          ip domain-lookup
          snmp-server user admin network-admin auth md5 054E8CC97C9285D7B2A4A86F3BF5DC309779 priv aes-128 0071BEF07CE9BA9CF0C4A56664E28359A20F localizedV2key
          snmp-server user cisco network-admin auth md5 49679D8018D88B89F389AD613D9A9744FF18 priv aes-128 332DFEA276B1A98CA6BDBE7B3FAED245EB02 localizedV2key
          rmon event 1 log trap public description FATAL(1) owner PMON@FATAL
          rmon event 2 log trap public description CRITICAL(2) owner PMON@CRITICAL
          rmon event 3 log trap public description ERROR(3) owner PMON@ERROR
          rmon event 4 log trap public description WARNING(4) owner PMON@WARNING
          rmon event 5 log trap public description INFORMATION(5) owner PMON@INFO

          vlan 1

          vrf context management
            ip route 0.0.0.0/0 10.3.7.1

          interface Ethernet1/1
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/1.2
            mtu 9216
            encapsulation dot1q 2
            ip address 172.18.20.1/31
            no shutdown

          interface Ethernet1/2
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/2.2
            mtu 9216
            encapsulation dot1q 2
            ip address 172.18.20.3/31
            no shutdown

          interface Ethernet1/3

          interface Ethernet1/4

          interface Ethernet1/5

          interface Ethernet1/6

          interface Ethernet1/7

          interface Ethernet1/8

          interface Ethernet1/9

          interface Ethernet1/10

          interface Ethernet1/11

          interface Ethernet1/12

          interface Ethernet1/13

          interface Ethernet1/14

          interface Ethernet1/15

          interface Ethernet1/16

          interface Ethernet1/17

          interface Ethernet1/18

          interface Ethernet1/19

          interface Ethernet1/20

          interface Ethernet1/21

          interface Ethernet1/22

          interface Ethernet1/23

          interface Ethernet1/24

          interface Ethernet1/25

          interface Ethernet1/26

          interface Ethernet1/27

          interface Ethernet1/28

          interface Ethernet1/29

          interface Ethernet1/30

          interface Ethernet1/31

          interface Ethernet1/32

          interface Ethernet1/33

          interface Ethernet1/34

          interface Ethernet1/35

          interface Ethernet1/36

          interface Ethernet1/37

          interface Ethernet1/38

          interface Ethernet1/39

          interface Ethernet1/40

          interface Ethernet1/41

          interface Ethernet1/42

          interface Ethernet1/43

          interface Ethernet1/44

          interface Ethernet1/45

          interface Ethernet1/46

          interface Ethernet1/47

          interface Ethernet1/48

          interface Ethernet1/49

          interface Ethernet1/50

          interface Ethernet1/51

          interface Ethernet1/52

          interface Ethernet1/53

          interface Ethernet1/54

          interface Ethernet1/55

          interface Ethernet1/56

          interface Ethernet1/57

          interface Ethernet1/58

          interface Ethernet1/59

          interface Ethernet1/60

          interface Ethernet1/61

          interface Ethernet1/62

          interface Ethernet1/63

          interface Ethernet1/64

          interface mgmt0
            no cdp enable
            vrf member management
            ip address 10.3.28.7/24
          icam monitor scale

          line console
            exec-timeout 0
          line vty
            exec-timeout 0
          router bgp 65012
            address-family ipv4 unicast
            neighbor 172.18.20.0
              remote-as 65020
              update-source Ethernet1/1.2
              address-family ipv4 unicast
            neighbor 172.18.20.2
              remote-as 65020
              update-source Ethernet1/2.2
              address-family ipv4 unicast
          event manager applet BOOTCONFIG
            event syslog pattern "Configured from vty"
            action 1.0 cli python bootflash:set_boot.py

          no logging console
    cpu_limit: 100
    cpus: 2
    data_volume: null
    hide_links: false
    id: n7
    image_definition: null
    label: NJ-DMZ-1
    node_definition: nxosv9000
    parameters: {}
    ram: 8192
    tags: []
    x: 0
    y: -360
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: mgmt0
        slot: 0
        type: physical
      - id: i2
        label: Ethernet1/1
        slot: 1
        type: physical
      - id: i3
        label: Ethernet1/2
        slot: 2
        type: physical
      - id: i4
        label: Ethernet1/3
        slot: 3
        type: physical
      - id: i5
        label: Ethernet1/4
        slot: 4
        type: physical
      - id: i6
        label: Ethernet1/5
        slot: 5
        type: physical
      - id: i7
        label: Ethernet1/6
        slot: 6
        type: physical
      - id: i8
        label: Ethernet1/7
        slot: 7
        type: physical
      - id: i9
        label: Ethernet1/8
        slot: 8
        type: physical
      - id: i10
        label: Ethernet1/9
        slot: 9
        type: physical
      - id: i11
        label: Ethernet1/10
        slot: 10
        type: physical
      - id: i12
        label: Ethernet1/11
        slot: 11
        type: physical
      - id: i13
        label: Ethernet1/12
        slot: 12
        type: physical
      - id: i14
        label: Ethernet1/13
        slot: 13
        type: physical
      - id: i15
        label: Ethernet1/14
        slot: 14
        type: physical
      - id: i16
        label: Ethernet1/15
        slot: 15
        type: physical
      - id: i17
        label: Ethernet1/16
        slot: 16
        type: physical
      - id: i18
        label: Ethernet1/17
        slot: 17
        type: physical
      - id: i19
        label: Ethernet1/18
        slot: 18
        type: physical
      - id: i20
        label: Ethernet1/19
        slot: 19
        type: physical
  - boot_disk_size: null
    configuration:
      - name: nxos_config.txt
        content: |-
          hostname inserthostname-here
          # workaround for booting to loader> prompt
          echo 'from cli import cli' > set_boot.py
          echo 'import json' >> set_boot.py
          echo 'import os' >> set_boot.py
          echo 'import time' >> set_boot.py
          echo 'bootimage = json.loads(cli("show version | json"))["kick_file_name"]' >> set_boot.py
          echo 'set_boot = cli("conf t ; boot nxos {} ; no event manager applet BOOTCONFIG".format(bootimage))' >> set_boot.py
          echo 'i = 0' >> set_boot.py
          echo 'while i < 10:' >> set_boot.py
          echo '    try:' >> set_boot.py
          echo '        save_config = cli("copy running-config startup-config")' >> set_boot.py
          echo '        break' >> set_boot.py
          echo '    except Exception:' >> set_boot.py
          echo '        i += 1' >> set_boot.py
          echo '        time.sleep(1)' >> set_boot.py
          echo 'os.remove("/bootflash/set_boot.py")' >> set_boot.py
          event manager applet BOOTCONFIG
           event syslog pattern "Configured from vty"
           action 1.0 cli python bootflash:set_boot.py
          # minimum needed config to login
          no password strength-check
          username admin role network-admin
          username admin password cisco role network-admin
          username cisco role network-admin
          username cisco password C!sco12345 role network-admin
          snmp-server user admin network-admin auth md5 C!sco12345
          boot nxos bootflash:nxos64-cs.10.4.3.F.bin
    cpu_limit: 100
    cpus: 4
    data_volume: null
    hide_links: false
    id: n8
    image_definition: null
    label: campus-bgw-1
    node_definition: nxosv9000
    parameters: {}
    ram: 10240
    tags: []
    x: -680
    y: -40
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: mgmt0
        slot: 0
        type: physical
      - id: i2
        label: Ethernet1/1
        slot: 1
        type: physical
      - id: i3
        label: Ethernet1/2
        slot: 2
        type: physical
      - id: i4
        label: Ethernet1/3
        slot: 3
        type: physical
  - boot_disk_size: null
    configuration:
      - name: nxos_config.txt
        content: |-
          hostname inserthostname-here
          # workaround for booting to loader> prompt
          echo 'from cli import cli' > set_boot.py
          echo 'import json' >> set_boot.py
          echo 'import os' >> set_boot.py
          echo 'import time' >> set_boot.py
          echo 'bootimage = json.loads(cli("show version | json"))["kick_file_name"]' >> set_boot.py
          echo 'set_boot = cli("conf t ; boot nxos {} ; no event manager applet BOOTCONFIG".format(bootimage))' >> set_boot.py
          echo 'i = 0' >> set_boot.py
          echo 'while i < 10:' >> set_boot.py
          echo '    try:' >> set_boot.py
          echo '        save_config = cli("copy running-config startup-config")' >> set_boot.py
          echo '        break' >> set_boot.py
          echo '    except Exception:' >> set_boot.py
          echo '        i += 1' >> set_boot.py
          echo '        time.sleep(1)' >> set_boot.py
          echo 'os.remove("/bootflash/set_boot.py")' >> set_boot.py
          event manager applet BOOTCONFIG
           event syslog pattern "Configured from vty"
           action 1.0 cli python bootflash:set_boot.py
          # minimum needed config to login
          no password strength-check
          username admin role network-admin
          username admin password cisco role network-admin
          username cisco role network-admin
          username cisco password C!sco12345 role network-admin
          snmp-server user admin network-admin auth md5 C!sco12345
          boot nxos bootflash:nxos64-cs.10.4.3.F.bin
    cpu_limit: 100
    cpus: 4
    data_volume: null
    hide_links: false
    id: n9
    image_definition: null
    label: campus-bgw-2
    node_definition: nxosv9000
    parameters: {}
    ram: 10240
    tags: []
    x: -440
    y: -40
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: mgmt0
        slot: 0
        type: physical
      - id: i2
        label: Ethernet1/1
        slot: 1
        type: physical
      - id: i3
        label: Ethernet1/2
        slot: 2
        type: physical
      - id: i4
        label: Ethernet1/3
        slot: 3
        type: physical
  - boot_disk_size: null
    configuration:
      - name: nxos_config.txt
        content: |-
          hostname inserthostname-here
          # workaround for booting to loader> prompt
          echo 'from cli import cli' > set_boot.py
          echo 'import json' >> set_boot.py
          echo 'import os' >> set_boot.py
          echo 'import time' >> set_boot.py
          echo 'bootimage = json.loads(cli("show version | json"))["kick_file_name"]' >> set_boot.py
          echo 'set_boot = cli("conf t ; boot nxos {} ; no event manager applet BOOTCONFIG".format(bootimage))' >> set_boot.py
          echo 'i = 0' >> set_boot.py
          echo 'while i < 10:' >> set_boot.py
          echo '    try:' >> set_boot.py
          echo '        save_config = cli("copy running-config startup-config")' >> set_boot.py
          echo '        break' >> set_boot.py
          echo '    except Exception:' >> set_boot.py
          echo '        i += 1' >> set_boot.py
          echo '        time.sleep(1)' >> set_boot.py
          echo 'os.remove("/bootflash/set_boot.py")' >> set_boot.py
          event manager applet BOOTCONFIG
           event syslog pattern "Configured from vty"
           action 1.0 cli python bootflash:set_boot.py
          # minimum needed config to login
          no password strength-check
          username admin role network-admin
          username admin password cisco role network-admin
          username cisco role network-admin
          username cisco password C!sco12345 role network-admin
          snmp-server user admin network-admin auth md5 C!sco12345
    cpu_limit: 100
    cpus: 2
    data_volume: null
    hide_links: false
    id: n10
    image_definition: nxosv9300-10-4-2-f
    label: Campus
    node_definition: nxosv9000
    parameters: {}
    ram: 8192
    tags: []
    x: -560
    y: 80
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: mgmt0
        slot: 0
        type: physical
      - id: i2
        label: Ethernet1/1
        slot: 1
        type: physical
      - id: i3
        label: Ethernet1/2
        slot: 2
        type: physical
      - id: i4
        label: Ethernet1/3
        slot: 3
        type: physical
  - boot_disk_size: null
    configuration:
      - name: nxos_config.txt
        content: |2-

          !Command: show running-config
          !Running configuration last done at: Thu Jul 25 17:46:51 2024
          !Time: Thu Jul 25 17:46:52 2024

          version 10.3(5) Bios:version
          hostname NY-Core-1
          vdc NY-Core-1 id 1
            limit-resource vlan minimum 16 maximum 4094
            limit-resource vrf minimum 2 maximum 4096
            limit-resource port-channel minimum 0 maximum 511
            limit-resource m4route-mem minimum 58 maximum 58
            limit-resource m6route-mem minimum 8 maximum 8

          feature ospf
          feature bgp

          no password strength-check
          username admin password 5 $5$AHBALL$xA6wFZ249Kd8AkPauYCpAPzjg4RrnhiAbLtq89vR7Y.  role network-admin
          username cisco password 5 $5$CCBPAL$hOctKMxo9.qOcZtPDcpAbksCVPkKtX7TxeGTMEc28zD  role network-admin
          username cisco passphrase  lifetime 99999 warntime 14 gracetime 3
          ip domain-lookup
          snmp-server user admin network-admin auth md5 01523F5233518FAC063B9D87B7F906FB1F08 priv aes-128 365A3519390BD6B7697AD1ACBABB4BA3421F localizedV2key
          snmp-server user cisco network-admin auth md5 216047351160C0E4707ED8DAF0FD4CEF1604 priv aes-128 5315254D90FE3737A9A7174734688371D4CE localizedV2key
          rmon event 1 log trap public description FATAL(1) owner PMON@FATAL
          rmon event 2 log trap public description CRITICAL(2) owner PMON@CRITICAL
          rmon event 3 log trap public description ERROR(3) owner PMON@ERROR
          rmon event 4 log trap public description WARNING(4) owner PMON@WARNING
          rmon event 5 log trap public description INFORMATION(5) owner PMON@INFO

          vlan 1

          vrf context management
            ip route 0.0.0.0/0 10.3.7.1

          interface Ethernet1/1
            no switchport
            mtu 9216
            ip address 192.168.1.0/31
            ip ospf network point-to-point
            ip router ospf 1 area 0.0.0.0
            no shutdown

          interface Ethernet1/2
            no switchport
            mtu 9216
            ip address 192.168.10.1/31
            no shutdown

          interface Ethernet1/3
            no switchport
            mtu 9216
            ip address 192.168.10.3/31
            no shutdown

          interface Ethernet1/4

          interface Ethernet1/5

          interface Ethernet1/6

          interface Ethernet1/7

          interface Ethernet1/8

          interface Ethernet1/9

          interface Ethernet1/10

          interface Ethernet1/11

          interface Ethernet1/12

          interface Ethernet1/13

          interface Ethernet1/14

          interface Ethernet1/15

          interface Ethernet1/16

          interface Ethernet1/17

          interface Ethernet1/18

          interface Ethernet1/19

          interface Ethernet1/20

          interface Ethernet1/21

          interface Ethernet1/22

          interface Ethernet1/23

          interface Ethernet1/24

          interface Ethernet1/25

          interface Ethernet1/26

          interface Ethernet1/27

          interface Ethernet1/28

          interface Ethernet1/29

          interface Ethernet1/30

          interface Ethernet1/31

          interface Ethernet1/32

          interface Ethernet1/33

          interface Ethernet1/34

          interface Ethernet1/35

          interface Ethernet1/36

          interface Ethernet1/37

          interface Ethernet1/38

          interface Ethernet1/39

          interface Ethernet1/40

          interface Ethernet1/41

          interface Ethernet1/42

          interface Ethernet1/43

          interface Ethernet1/44

          interface Ethernet1/45

          interface Ethernet1/46

          interface Ethernet1/47

          interface Ethernet1/48

          interface Ethernet1/49

          interface Ethernet1/50

          interface Ethernet1/51

          interface Ethernet1/52

          interface Ethernet1/53

          interface Ethernet1/54

          interface Ethernet1/55

          interface Ethernet1/56

          interface Ethernet1/57

          interface Ethernet1/58

          interface Ethernet1/59

          interface Ethernet1/60

          interface Ethernet1/61

          interface Ethernet1/62

          interface Ethernet1/63

          interface Ethernet1/64

          interface mgmt0
            no cdp enable
            vrf member management
            ip address 10.3.7.100/24
          line console
            exec-timeout 0
          line vty
            exec-timeout 0
          router ospf 1
            router-id 192.168.99.0
          router bgp 65000
            address-family ipv4 unicast
              network 192.168.10.0/31
              network 192.168.10.2/31
            neighbor 192.168.1.1
              remote-as 65000
              update-source Ethernet1/1
              address-family ipv4 unicast
            neighbor 192.168.10.0
              remote-as 65010
              update-source Ethernet1/2
              address-family ipv4 unicast
            neighbor 192.168.10.2
              remote-as 65010
              update-source Ethernet1/3
              address-family ipv4 unicast

          no logging console
    cpu_limit: 100
    cpus: 2
    data_volume: null
    hide_links: false
    id: n11
    image_definition: null
    label: NY-Core-1
    node_definition: nxosv9000
    parameters: {}
    ram: 8192
    tags: []
    x: -680
    y: -400
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: mgmt0
        slot: 0
        type: physical
      - id: i2
        label: Ethernet1/1
        slot: 1
        type: physical
      - id: i3
        label: Ethernet1/2
        slot: 2
        type: physical
      - id: i4
        label: Ethernet1/3
        slot: 3
        type: physical
      - id: i5
        label: Ethernet1/4
        slot: 4
        type: physical
      - id: i6
        label: Ethernet1/5
        slot: 5
        type: physical
      - id: i7
        label: Ethernet1/6
        slot: 6
        type: physical
      - id: i8
        label: Ethernet1/7
        slot: 7
        type: physical
      - id: i9
        label: Ethernet1/8
        slot: 8
        type: physical
      - id: i10
        label: Ethernet1/9
        slot: 9
        type: physical
      - id: i11
        label: Ethernet1/10
        slot: 10
        type: physical
      - id: i12
        label: Ethernet1/11
        slot: 11
        type: physical
  - boot_disk_size: null
    configuration:
      - name: nxos_config.txt
        content: |2-

          !Command: show running-config
          !Running configuration last done at: Thu Jul 25 17:57:36 2024
          !Time: Thu Jul 25 17:57:36 2024

          version 10.3(5) Bios:version
          hostname NJ-Core-1
          vdc NJ-Core-1 id 1
            limit-resource vlan minimum 16 maximum 4094
            limit-resource vrf minimum 2 maximum 4096
            limit-resource port-channel minimum 0 maximum 511
            limit-resource m4route-mem minimum 58 maximum 58
            limit-resource m6route-mem minimum 8 maximum 8

          feature ospf
          feature bgp

          no password strength-check
          username admin password 5 $5$IMLHIG$Kaem/xNeW2FRKN07yJurM1RDr/Sa/Kgn2HmOoS0cCP3  role network-admin
          username cisco password 5 $5$LMJDDN$O2bndujHejbkGi3ZVP659bp9QwT7.XdxBbTeb49Fo8A  role network-admin
          username cisco passphrase  lifetime 99999 warntime 14 gracetime 3
          ip domain-lookup
          snmp-server user admin network-admin auth md5 177DDFD72BD766E57803C66A54ED636B568C priv aes-128 364ADAE224976BF17A15F07F1AA83C3D0682 localizedV2key
          snmp-server user cisco network-admin auth md5 3777E4CB5BB3088F3F46B5761FA83F3C5DDD priv aes-128 167FF0D928C07BF45E26C36E43B83B655C80 localizedV2key
          rmon event 1 log trap public description FATAL(1) owner PMON@FATAL
          rmon event 2 log trap public description CRITICAL(2) owner PMON@CRITICAL
          rmon event 3 log trap public description ERROR(3) owner PMON@ERROR
          rmon event 4 log trap public description WARNING(4) owner PMON@WARNING
          rmon event 5 log trap public description INFORMATION(5) owner PMON@INFO

          vlan 1

          vrf context management
            ip route 0.0.0.0/0 10.3.7.1

          interface Ethernet1/1
            no switchport
            mtu 9216
            ip address 192.168.1.1/31
            ip ospf network point-to-point
            ip router ospf 1 area 0.0.0.0
            no shutdown

          interface Ethernet1/2
            no switchport
            mtu 9216
            ip address 192.168.20.1/31
            no shutdown

          interface Ethernet1/3
            no switchport
            mtu 9216
            ip address 192.168.20.3/31
            no shutdown

          interface Ethernet1/4

          interface Ethernet1/5

          interface Ethernet1/6

          interface Ethernet1/7

          interface Ethernet1/8

          interface Ethernet1/9

          interface Ethernet1/10

          interface Ethernet1/11

          interface Ethernet1/12

          interface Ethernet1/13

          interface Ethernet1/14

          interface Ethernet1/15

          interface Ethernet1/16

          interface Ethernet1/17

          interface Ethernet1/18

          interface Ethernet1/19

          interface Ethernet1/20

          interface Ethernet1/21

          interface Ethernet1/22

          interface Ethernet1/23

          interface Ethernet1/24

          interface Ethernet1/25

          interface Ethernet1/26

          interface Ethernet1/27

          interface Ethernet1/28

          interface Ethernet1/29

          interface Ethernet1/30

          interface Ethernet1/31

          interface Ethernet1/32

          interface Ethernet1/33

          interface Ethernet1/34

          interface Ethernet1/35

          interface Ethernet1/36

          interface Ethernet1/37

          interface Ethernet1/38

          interface Ethernet1/39

          interface Ethernet1/40

          interface Ethernet1/41

          interface Ethernet1/42

          interface Ethernet1/43

          interface Ethernet1/44

          interface Ethernet1/45

          interface Ethernet1/46

          interface Ethernet1/47

          interface Ethernet1/48

          interface Ethernet1/49

          interface Ethernet1/50

          interface Ethernet1/51

          interface Ethernet1/52

          interface Ethernet1/53

          interface Ethernet1/54

          interface Ethernet1/55

          interface Ethernet1/56

          interface Ethernet1/57

          interface Ethernet1/58

          interface Ethernet1/59

          interface Ethernet1/60

          interface Ethernet1/61

          interface Ethernet1/62

          interface Ethernet1/63

          interface Ethernet1/64

          interface mgmt0
            no cdp enable
            vrf member management
            ip address 10.3.7.102/24
          line console
            exec-timeout 0
          line vty
            exec-timeout 0
          router ospf 1
            router-id 192.168.99.1
          router bgp 65000
            address-family ipv4 unicast
              network 192.168.20.0/31
              network 192.168.20.2/31
            neighbor 192.168.1.0
              remote-as 65000
              update-source Ethernet1/1
              address-family ipv4 unicast
            neighbor 192.168.20.0
              remote-as 65020
              update-source Ethernet1/2
              address-family ipv4 unicast
            neighbor 192.168.20.2
              remote-as 65020
              update-source Ethernet1/3
              address-family ipv4 unicast

          no logging console
    cpu_limit: null
    cpus: null
    data_volume: null
    hide_links: false
    id: n12
    image_definition: null
    label: NJ-Core-1
    node_definition: nxosv9000
    parameters: {}
    ram: null
    tags: []
    x: -440
    y: -400
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: mgmt0
        slot: 0
        type: physical
      - id: i2
        label: Ethernet1/1
        slot: 1
        type: physical
      - id: i3
        label: Ethernet1/2
        slot: 2
        type: physical
      - id: i4
        label: Ethernet1/3
        slot: 3
        type: physical
      - id: i5
        label: Ethernet1/4
        slot: 4
        type: physical
      - id: i6
        label: Ethernet1/5
        slot: 5
        type: physical
      - id: i7
        label: Ethernet1/6
        slot: 6
        type: physical
      - id: i8
        label: Ethernet1/7
        slot: 7
        type: physical
      - id: i9
        label: Ethernet1/8
        slot: 8
        type: physical
      - id: i10
        label: Ethernet1/9
        slot: 9
        type: physical
      - id: i11
        label: Ethernet1/10
        slot: 10
        type: physical
      - id: i12
        label: Ethernet1/11
        slot: 11
        type: physical
  - boot_disk_size: null
    configuration:
      - name: nxos_config.txt
        content: |-
          hostname inserthostname-here
          # workaround for booting to loader> prompt
          echo 'from cli import cli' > set_boot.py
          echo 'import json' >> set_boot.py
          echo 'import os' >> set_boot.py
          echo 'import time' >> set_boot.py
          echo 'bootimage = json.loads(cli("show version | json"))["kick_file_name"]' >> set_boot.py
          echo 'set_boot = cli("conf t ; boot nxos {} ; no event manager applet BOOTCONFIG".format(bootimage))' >> set_boot.py
          echo 'i = 0' >> set_boot.py
          echo 'while i < 10:' >> set_boot.py
          echo '    try:' >> set_boot.py
          echo '        save_config = cli("copy running-config startup-config")' >> set_boot.py
          echo '        break' >> set_boot.py
          echo '    except Exception:' >> set_boot.py
          echo '        i += 1' >> set_boot.py
          echo '        time.sleep(1)' >> set_boot.py
          echo 'os.remove("/bootflash/set_boot.py")' >> set_boot.py
          event manager applet BOOTCONFIG
           event syslog pattern "Configured from vty"
           action 1.0 cli python bootflash:set_boot.py
          # minimum needed config to login
          no password strength-check
          username admin role network-admin
          username admin password cisco role network-admin
          username cisco role network-admin
          username cisco password cisco role network-admin
    cpu_limit: 100
    cpus: 2
    data_volume: null
    hide_links: false
    id: n13
    image_definition: null
    label: MCAST-Source
    node_definition: nxosv9000
    parameters: {}
    ram: 8192
    tags: []
    x: 160
    y: -360
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: mgmt0
        slot: 0
        type: physical
      - id: i2
        label: Ethernet1/1
        slot: 1
        type: physical
      - id: i3
        label: Ethernet1/2
        slot: 2
        type: physical
      - id: i4
        label: Ethernet1/3
        slot: 3
        type: physical
  - boot_disk_size: null
    configuration:
      - name: nxos_config.txt
        content: |2-

          !Command: show running-config
          !Running configuration last done at: Wed Sep 11 10:45:32 2024
          !Time: Wed Sep 11 10:45:33 2024

          version 10.4(3) Bios:version
          hostname NJ-BGW-1
          vdc NJ-BGW-1 id 1
            limit-resource vlan minimum 16 maximum 4094
            limit-resource vrf minimum 2 maximum 4096
            limit-resource port-channel minimum 0 maximum 511
            limit-resource m4route-mem minimum 58 maximum 58
            limit-resource m6route-mem minimum 8 maximum 8

          feature nxapi
          cfs eth distribute
          feature ngmvpn
          nv overlay evpn
          feature ospf
          feature bgp
          feature pim
          feature interface-vlan
          feature vn-segment-vlan-based
          feature lacp
          feature dhcp
          feature vpc
          feature lldp
          feature nv overlay
          evpn multisite border-gateway 65020
            delay-restore time 300
          feature ngoam

          no password strength-check
          username admin password 5 $5$LFBJLD$wDyaB7SdvManBABGY52QAF08yjFBDsbMK65C7ih3RW1  role network-admin
          username cisco password 5 $5$CFELNI$ioF7uQBHxCEZVt3mLMBgVB515ltyfvyHgR5zkAL8WW.  role network-admin
          username cisco passphrase  lifetime 99999 warntime 14 gracetime 3
          ip domain-lookup
          copp profile strict
          snmp-server user admin network-admin auth md5 483BDC5A7562E12EE4297F74CD8196AE1866 localizedV2key
          snmp-server user cisco network-admin auth md5 007190932C88A73533F13A44452E79381A26 priv aes-128 365AF3A11EB9D22C63922F7E5D7B2B620163 localizedV2key
          snmp-server host 10.3.0.30 traps version 2c public udp-port 2162
          rmon event 1 log trap public description FATAL(1) owner PMON@FATAL
          rmon event 2 log trap public description CRITICAL(2) owner PMON@CRITICAL
          rmon event 3 log trap public description ERROR(3) owner PMON@ERROR
          rmon event 4 log trap public description WARNING(4) owner PMON@WARNING
          rmon event 5 log trap public description INFORMATION(5) owner PMON@INFO

          fabric forwarding anycast-gateway-mac 2020.0000.00aa
          ipv6 switch-packets lla
          ip pim evpn-border-leaf
          ip pim rp-address 20.1.1.33 group-list 239.1.1.0/25
          ip pim ssm range 232.0.0.0/8
          ip igmp snooping vxlan
          ip multicast multipath s-g-hash next-hop-based
          vlan 1,20,2000,3600
          vlan 2000
            name dmz-1
            vn-segment 50000

          ip prefix-list default-route seq 5 permit 0.0.0.0/0 le 1
          ip prefix-list host-route seq 5 permit 0.0.0.0/0 eq 32
          ipv6 prefix-list default-route-v6 seq 5 permit 0::/0
          ipv6 prefix-list host-route-v6 seq 5 permit 0::/0 eq 128
          route-map extcon-rmap-filter deny 10
            match ip address prefix-list default-route
          route-map extcon-rmap-filter deny 20
            match ip address prefix-list host-route
          route-map extcon-rmap-filter permit 1000
          route-map extcon-rmap-filter-allow-host deny 10
            match ip address prefix-list default-route
          route-map extcon-rmap-filter-allow-host permit 1000
          route-map extcon-rmap-filter-v6 deny 10
            match ipv6 address prefix-list default-route-v6
          route-map extcon-rmap-filter-v6 deny 20
            match ipv6 address prefix-list host-route-v6
          route-map extcon-rmap-filter-v6 permit 1000
          route-map extcon-rmap-filter-v6-allow-host deny 10
            match ipv6 address prefix-list default-route-v6
          route-map extcon-rmap-filter-v6-allow-host permit 1000
          route-map fabric-rmap-redist-subnet permit 10
            match tag 12345
          route-map rmap-redist-direct permit 10
            match tag 54321
          service dhcp
          ip dhcp relay
          ip dhcp relay information option
          ip dhcp relay information option vpn
          ipv6 dhcp relay
          vrf context dmz-1
            description dmz-1
            vni 50000
            ip pim rp-address 100.100.100.100 group-list 224.0.0.0/4
            ip pim ssm range 232.0.0.0/8
            ip multicast multipath s-g-hash next-hop-based
            rd auto
            address-family ipv4 unicast
              route-target both auto
              route-target both auto mvpn
              route-target both auto evpn
            address-family ipv6 unicast
              route-target both auto
              route-target both auto evpn
          vrf context management
            ip route 0.0.0.0/0 10.3.7.1
          vpc domain 1
            peer-switch
            peer-keepalive destination 10.3.7.122 source 10.3.7.121
            delay restore 150
            peer-gateway
            auto-recovery reload-delay 360
            ipv6 nd synchronize
            ip arp synchronize
          ngoam install acl

          nxapi http port 80


          interface Vlan1
            no ip redirects
            no ipv6 redirects

          interface Vlan20
            no shutdown
            mtu 9216
            vrf member dmz-1
            ip address 172.18.112.1/30

          interface Vlan2000
            description dmz-1
            no shutdown
            mtu 9216
            vrf member dmz-1
            no ip redirects
            ip forward
            ipv6 address use-link-local-only
            no ipv6 redirects
            ip pim sparse-mode

          interface Vlan3600
            description VPC-Peer-Link SVI
            no shutdown
            mtu 9216
            no ip redirects
            ip address 20.1.1.50/30
            no ipv6 redirects
            ip ospf network point-to-point
            ip router ospf UNDERLAY area 0.0.0.0
            ip pim sparse-mode

          interface port-channel500
            description "vpc-peer-link NJ-BGW-1--NJ-BGW-2"
            switchport mode trunk
            spanning-tree port type network
            vpc peer-link

          interface nve1
            no shutdown
            host-reachability protocol bgp
            advertise virtual-rmac
            source-interface loopback1
            multisite border-gateway interface loopback100
            member vni 50000 associate-vrf
              multisite ingress-replication optimized
              mcast-group 239.1.1.1

          interface Ethernet1/1
            description "PO 500 (vpc-peer-link) member NJ-BGW-1-Ethernet1/1 to NJ-BGW-2-Ethernet1/1"
            switchport mode trunk
            channel-group 500 mode active

          interface Ethernet1/2
            no switchport
            mtu 9216
            ip address 192.168.20.0/31 tag 54321
            no shutdown
            evpn multisite dci-tracking

          interface Ethernet1/3
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/3.2
            mtu 9216
            encapsulation dot1q 2
            vrf member dmz-1
            ip address 172.18.20.0/31
            ip pim sparse-mode
            no shutdown

          interface Ethernet1/4
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/5
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/6
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/7
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/8
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/9
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/10
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/11
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/12
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/13
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/14
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/15
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/16
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/17
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/18
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/19
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/20
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/21
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/22
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/23
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/24
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/25
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/26
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/27
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/28
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/29
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/30
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/31
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/32
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/33
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/34
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/35
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/36
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/37
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/38
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/39
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/40
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/41
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/42
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/43
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/44
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/45
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/46
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/47
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/48
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/49
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/50
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/51
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/52
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/53
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/54
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/55
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/56
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/57
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/58
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/59
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/60
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/61
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/62
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/63
            no switchport
            mtu 9216
            no shutdown

          interface Ethernet1/64
            no switchport
            mtu 9216
            no shutdown

          interface mgmt0
            no cdp enable
            vrf member management
            ip address 10.3.7.121/24

          interface loopback0
            description Routing loopback interface
            ip address 20.1.1.1/32 tag 54321
            ip router ospf UNDERLAY area 0.0.0.0
            ip pim sparse-mode

          interface loopback1
            description VTEP loopback interface
            ip address 20.1.1.17/32 tag 54321
            ip address 20.1.1.19/32 secondary tag 54321
            ip router ospf UNDERLAY area 0.0.0.0
            ip pim sparse-mode

          interface loopback100
            ip address 10.10.0.2/32 tag 54321
            ip router ospf UNDERLAY area 0.0.0.0
            ip pim sparse-mode
          icam monitor scale

          line console
            exec-timeout 0
          line vty
            exec-timeout 0
          router ospf UNDERLAY
            router-id 20.1.1.1
          router bgp 65020
            router-id 20.1.1.1
            address-family ipv4 unicast
              redistribute direct route-map rmap-redist-direct
            address-family ipv6 unicast
            address-family l2vpn evpn
              advertise-pip
            neighbor 10.1.1.1
              remote-as 65010
              update-source loopback0
              ebgp-multihop 5
              peer-type fabric-external
              address-family ipv4 mvpn
                send-community
                send-community extended
                rewrite-rt-asn
              address-family l2vpn evpn
                send-community
                send-community extended
                rewrite-evpn-rt-asn
            neighbor 10.1.1.2
              remote-as 65010
              update-source loopback0
              ebgp-multihop 5
              peer-type fabric-external
              address-family ipv4 mvpn
                send-community
                send-community extended
                rewrite-rt-asn
              address-family l2vpn evpn
                send-community
                send-community extended
                rewrite-evpn-rt-asn
            neighbor 20.1.1.49
              remote-as 65020
              update-source Vlan3600
              address-family ipv4 unicast
                next-hop-self
            neighbor 30.1.1.1
              remote-as 65030
              update-source loopback0
              ebgp-multihop 5
              peer-type fabric-external
              address-family ipv4 mvpn
                send-community
                send-community extended
                rewrite-rt-asn
              address-family l2vpn evpn
                send-community
                send-community extended
                rewrite-evpn-rt-asn
            neighbor 30.1.1.2
              remote-as 65030
              update-source loopback0
              ebgp-multihop 5
              peer-type fabric-external
              address-family ipv4 mvpn
                send-community
                send-community extended
                rewrite-rt-asn
              address-family l2vpn evpn
                send-community
                send-community extended
                rewrite-evpn-rt-asn
            neighbor 192.168.20.1
              remote-as 65000
              update-source Ethernet1/2
              address-family ipv4 unicast
                next-hop-self
            vrf dmz-1
              address-family ipv4 unicast
                network 0.0.0.0/0
                advertise l2vpn evpn
                redistribute direct route-map fabric-rmap-redist-subnet
                maximum-paths ibgp 2
              address-family ipv6 unicast
                advertise l2vpn evpn
                redistribute direct route-map fabric-rmap-redist-subnet
                maximum-paths ibgp 2
              neighbor 172.18.20.1
                remote-as 65012
                address-family ipv4 unicast
                  send-community
                  send-community extended
                  route-map extcon-rmap-filter-allow-host out
              neighbor 172.18.112.2
                remote-as 65020
                address-family ipv4 unicast
                  send-community
                  send-community extended
          evpn
          event manager applet BOOTCONFIG
            event syslog pattern "Configured from vty"
            action 1.0 cli python bootflash:set_boot.py

          no logging console
    cpu_limit: 100
    cpus: 4
    data_volume: null
    hide_links: false
    id: n14
    image_definition: null
    label: NJ-BGW-1_0
    node_definition: nxosv9000
    parameters: {}
    ram: 10240
    tags: []
    x: -120
    y: -560
    interfaces:
      - id: i0
        label: Loopback0
        type: loopback
      - id: i1
        label: mgmt0
        slot: 0
        type: physical
      - id: i2
        label: Ethernet1/1
        slot: 1
        type: physical
      - id: i3
        label: Ethernet1/2
        slot: 2
        type: physical
      - id: i4
        label: Ethernet1/3
        slot: 3
        type: physical
      - id: i5
        label: Ethernet1/4
        slot: 4
        type: physical
      - id: i6
        label: Ethernet1/5
        slot: 5
        type: physical
      - id: i7
        label: Ethernet1/6
        slot: 6
        type: physical
      - id: i8
        label: Ethernet1/7
        slot: 7
        type: physical
      - id: i9
        label: Ethernet1/8
        slot: 8
        type: physical
      - id: i10
        label: Ethernet1/9
        slot: 9
        type: physical
      - id: i11
        label: Ethernet1/10
        slot: 10
        type: physical
      - id: i12
        label: Ethernet1/11
        slot: 11
        type: physical
      - id: i13
        label: Ethernet1/12
        slot: 12
        type: physical
      - id: i14
        label: Ethernet1/13
        slot: 13
        type: physical
      - id: i15
        label: Ethernet1/14
        slot: 14
        type: physical
      - id: i16
        label: Ethernet1/15
        slot: 15
        type: physical
      - id: i17
        label: Ethernet1/16
        slot: 16
        type: physical
      - id: i18
        label: Ethernet1/17
        slot: 17
        type: physical
      - id: i19
        label: Ethernet1/18
        slot: 18
        type: physical
      - id: i20
        label: Ethernet1/19
        slot: 19
        type: physical
links:
  - id: l0
    n1: n4
    n2: n5
    i1: i0
    i2: i0
    conditioning: {}
    label: ext-conn-0-port<->unmanaged-switch-0-port0
  - id: l1
    n1: n0
    n2: n5
    i1: i1
    i2: i1
    conditioning: {}
    label: NY-BGW-1-mgmt0<->unmanaged-switch-0-port1
  - id: l2
    n1: n1
    n2: n5
    i1: i1
    i2: i2
    conditioning: {}
    label: NY-BGW-2-mgmt0<->unmanaged-switch-0-port2
  - id: l3
    n1: n2
    n2: n5
    i1: i1
    i2: i5
    conditioning: {}
    label: NJ-BGW-1-mgmt0<->unmanaged-switch-0-port5
  - id: l4
    n1: n3
    n2: n5
    i1: i1
    i2: i6
    conditioning: {}
    label: NJ-BGW-2-mgmt0<->unmanaged-switch-0-port6
  - id: l5
    n1: n6
    n2: n5
    i1: i1
    i2: i7
    conditioning: {}
    label: NY-DMZ-1-mgmt0<->unmanaged-switch-0-port7
  - id: l6
    n1: n7
    n2: n5
    i1: i1
    i2: i8
    conditioning: {}
    label: NJ-DMZ-1-mgmt0<->unmanaged-switch-0-port8
  - id: l7
    n1: n0
    n2: n1
    i1: i2
    i2: i2
    conditioning: {}
    label: NY-BGW-1-Ethernet1/1<->NY-BGW-2-Ethernet1/1
  - id: l8
    n1: n2
    n2: n3
    i1: i2
    i2: i2
    conditioning: {}
    label: NJ-BGW-1-Ethernet1/1<->NJ-BGW-2-Ethernet1/1
  - id: l9
    n1: n0
    n2: n6
    i1: i4
    i2: i2
    conditioning: {}
    label: NY-BGW-1-Ethernet1/3<->NY-DMZ-1-Ethernet1/1
  - id: l10
    n1: n1
    n2: n6
    i1: i4
    i2: i3
    conditioning: {}
    label: NY-BGW-2-Ethernet1/3<->NY-DMZ-1-Ethernet1/2
  - id: l11
    n1: n2
    n2: n7
    i1: i4
    i2: i2
    conditioning: {}
    label: NJ-BGW-1-Ethernet1/3<->NJ-DMZ-1-Ethernet1/1
  - id: l12
    n1: n3
    n2: n7
    i1: i4
    i2: i3
    conditioning: {}
    label: NJ-BGW-2-Ethernet1/3<->NJ-DMZ-1-Ethernet1/2
  - id: l13
    n1: n8
    n2: n5
    i1: i1
    i2: i9
    conditioning: {}
    label: campus-bgw-1-mgmt0<->unmanaged-switch-0-port9
  - id: l14
    n1: n9
    n2: n5
    i1: i1
    i2: i10
    conditioning: {}
    label: campus-bgw-2-mgmt0<->unmanaged-switch-0-port10
  - id: l15
    n1: n8
    n2: n9
    i1: i2
    i2: i2
    conditioning: {}
    label: campus-bgw-1-Ethernet1/1<->campus-bgw-2-Ethernet1/1
  - id: l16
    n1: n10
    n2: n5
    i1: i1
    i2: i11
    conditioning: {}
    label: Campus-mgmt0<->unmanaged-switch-0-port11
  - id: l17
    n1: n10
    n2: n8
    i1: i2
    i2: i4
    conditioning: {}
    label: Campus-Ethernet1/1<->campus-bgw-1-Ethernet1/3
  - id: l18
    n1: n10
    n2: n9
    i1: i3
    i2: i4
    conditioning: {}
    label: Campus-Ethernet1/2<->campus-bgw-2-Ethernet1/3
  - id: l19
    n1: n11
    n2: n5
    i1: i1
    i2: i3
    conditioning: {}
    label: NY-Core-1-mgmt0<->unmanaged-switch-0-port3
  - id: l20
    n1: n11
    n2: n0
    i1: i3
    i2: i3
    conditioning: {}
    label: NY-Core-1-Ethernet1/2<->NY-BGW-1-Ethernet1/2
  - id: l21
    n1: n11
    n2: n1
    i1: i4
    i2: i3
    conditioning: {}
    label: NY-Core-1-Ethernet1/3<->NY-BGW-2-Ethernet1/2
  - id: l22
    n1: n12
    n2: n5
    i1: i1
    i2: i4
    conditioning: {}
    label: NJ-Core-1-mgmt0<->unmanaged-switch-0-port4
  - id: l23
    n1: n12
    n2: n11
    i1: i2
    i2: i2
    conditioning: {}
    label: NJ-Core-1-Ethernet1/1<->NY-Core-1-Ethernet1/1
  - id: l24
    n1: n12
    n2: n2
    i1: i3
    i2: i3
    conditioning: {}
    label: NJ-Core-1-Ethernet1/2<->NJ-BGW-1-Ethernet1/2
  - id: l25
    n1: n12
    n2: n3
    i1: i4
    i2: i3
    conditioning: {}
    label: NJ-Core-1-Ethernet1/3<->NJ-BGW-2-Ethernet1/2
  - id: l26
    n1: n8
    n2: n11
    i1: i3
    i2: i5
    conditioning: {}
    label: campus-bgw-1-Ethernet1/2<->NY-Core-1-Ethernet1/4
  - id: l27
    n1: n9
    n2: n12
    i1: i3
    i2: i5
    conditioning: {}
    label: campus-bgw-2-Ethernet1/2<->NJ-Core-1-Ethernet1/4
  - id: l28
    n1: n13
    n2: n5
    i1: i1
    i2: i12
    conditioning: {}
    label: MCAST-Source-mgmt0<->unmanaged-switch-0-port12
  - id: l29
    n1: n13
    n2: n7
    i1: i2
    i2: i4
    conditioning: {}
    label: MCAST-Source-Ethernet1/1<->NJ-DMZ-1-Ethernet1/3
lab:
  description: ''
  notes: ''
  title: Multi-site 10.4
  version: 0.2.2
